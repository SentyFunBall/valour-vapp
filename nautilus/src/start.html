<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Nautilus Home</title>
    <link rel="stylesheet" href="start.css">
    <pre>
      <script defer src='create-window.js'></script>
    </pre>  
  </head>
  <body>
    <div id="text1">
      <h1>Welcome to Nautilus.</h1>
      <p>Click "New project" to make a new application, or load one from previously.</p>
      <div id='logo_img' style="position: absolute; left: -200px; top: 50px;">
        <img src="./img/icons/win_dark.png" alt="win_dark.exe" >
      </div>
    </div>
    <div style="position: absolute; left:2px; top:680px;"><p>Running Nautilus v0.1.4i</p></div>
    <div id="buttonHolder" style="background-color: rgba(50, 50, 50, 0.5);">
      <div style="position: absolute; left:10px;top:185px">
        <button id="newBtn" type="button" style ="width:175px;height:25px;background-color: rgb(65, 108, 236);border:1px black;">
          <a style="color:cornsilk; position: relative; top:0px; text-decoration: none;" href="./create.html">New project</a>
        </button>
      </div>
      <div style="position: absolute; left:10px;top:220px">
        <div class="sbtn">
          <button type="button" id="loadBtn" style="width:175px; height:25px;color:cornsilk">Load Project</button>
        </div>
      </div>
      <div style="position: absolute; left:10px;top:255px">
        <button id="new-window" style ="width:175px;height:25px;background-color: rgb(65, 108, 236);border:1px black;">
          <p style="color:cornsilk; position: relative; top:-8px; text-decoration: none;">VAPP Wiki</p>
        </button>
      </div>
    </div>
    <script>
      const electron = require('electron'); 
      const path = require('path'); 
      const dialog = electron.remote.dialog; 

      var load = document.getElementById('loadBtn'); 
      load.addEventListener('click', (event) => { 
          console.log('yes');
          dialog.showOpenDialog((fileNames) => {
              // fileNames is an array that contains all the selected
              if(fileNames === undefined){
                  console.log("No file selected");
                  return;
              }

              fs.readFile(filepath, 'utf-8', (err, data) => {
                  if(err){
                      alert("An error ocurred reading the file :" + err.message);
                      return;
                  }

                  // Change how to handle the file content
                  Blockly.Xml.clearWorkspaceAndLoadFromXml(data, workspace)
                  console.log("The file content is : " + data);
              });
          });
      });
    </script>
</html>